---AWS Databases---
    RDS (relational database on AWS) allows deployment across multiple AZ (availability zones) for recovery and read replicas for performance

    Recovery: automatically point connection string from ec2 instance to database in an AZ. If one AZ goes down, it automatically connects to the twin database in another AZ

    Performance: ec2 instance writes to primary database who then writes to a replica database. If primary goes down though, you lose access to DB. Can setup so you write to primary database 
    and reads from replica database. Can have up to 5 replica databases to read from

    Nonrelational databases are similar in content as relational databases (have tables, rows, and key/value pairs)
    -columns in table can vary and will not effect other rows in database

    AWS uses DynamoDB

    Data warehousing is used for business intelligence. Used to pull in very large and complex datasets and usually used by management to do queries on data such as current performance vs 
    targets, etc.

    Data Warehousing databases use a different type of architecture when compared to the above databases
    AWS uses Redshift

    Elasticache can deploy and scale in-memory cach in the cloud. Allows web apps to get info quicker than using databases. Uses 2 engines: Memcached and Redis.




---Setting up an RDS instance with an EC2 webserver---
    create a new RDS DB

    go to vpc default security group (or security group of whatever vpc you're using) and add a rule to allow whatever database management (mysql/aurora, etc) language to communicate. Set 
    source to 
    the security group being used for webserver. This will allow mysql traffic to our default vcp security group from our webserver security group. 

    create ec2 instance and set security group as whatever webserver security group you're using

    when setting up database on site, the host is the database endpoint found in the RDS database Connectivity and Security

    can set the DNS of site using Elastic Loadbalancer to prevent needing to use an IP address to get to site

    to create an image of the site to allow autoscaling, go to ec2, go to actions->create image, then name it 




---Backups, Multi-AZ, and Read Replicas---
    Automated backups: 
        +allow you to recover your database to any point in time within a "retention period". The rentention period can be between 1 and 35 days.
        +take a full daily snapshot and will store transaction logs throughout the day
        +when you do a recovery, AWS will first choose the most recent daily backup, and then apply transaction logs relevant to that day
            >this allows you to do a point-in-time recovery down to a second, within the retention period
        +enabled by default
        +stored in S3 and size of S3 bucket is the same size as the database ie 10gb RDS = 10gb S3
        +during backup window, I/O may be suspended and you may experience higher latency

    Database Snapshots:
        +done manually
        +they are stored even after you delete the original RDS instance, unlike automated backups
        
    Encryption:
        +Supported for MySQL, Oracle, SQL server, PostgreSQL, MariaDB, and Aurora
        +done using AWS Key Management Service (KMS) service
        +data, automated backups, read replicas, and snapshots are all encrypted
        
    Multi-AZ:
        +database A synchronously replicas all changes to database B in a different AZ
        +if AZ of DB_A goes down, the DNS endpoint for the database automatically moves over to DB_B so DB operations can resume without interrupt
        +also triggers during DB maintenance
        +supports SQL server, Oracle, MySQL, PostgreSQL, MariaDB
        
    Read-replica:
        +EC2 instances each read from different instances of replicated DB but any writing is done to one central database
        +creates a read only copy of your database
        +supports MySQL, PostgreSQL, MariaDB, Oracle, Aurora, MSSQL
        +used for scaling, not data recovery
        +must have automatic backups turned on in order to deploy a read replica
        +can have up to 5 read replica copies of any database
        +can have read replicas of read replicas at the expense of latency




---DynamoDB---
    NoSQL database service for applications that need consistent, single-digit millisecond latency at scale. Fully managed database and supports both document and key-value data models.

    Basics of DynamoDB:
        +Stored on SSD storage
        +spread across 3 geographically distinct datacenters
        +Has 2 different types of read models: eventual consistent reads and strong consistent reads

    Eventual Consistent Reads:  
        +Consistency across all copies of data is usually reached within a second
            >repeating a read after a short time should return the updated data (best read performance)

    Strong Consistent Reads:
        +Returns a result that reflects all writes that received a successful response prior to the read

    DynamoDB accelerator (DAX):
        +in-memory cache
        +10x performance improvement
        +no neeed to manage caching logic
        +compatible with existing API calls

    Transactions:
        +Multiple "all-or-nothing" operations
        +financial transactions or fulfilling orders
        +up to 4MB of data

    On-Demand Capacity:
        +Pay-per-request pricing
        +balances cost and performance
        +no minimum capacity and no charge for read/write, just store/backup
        +pay more per request than with provisioned capacity

    Streams:
        +Time ordered record of item level changes in a table
        +stored for 24 hours

    Global Replication:
        +data replication across regions
        +used for global applications
        +read/write latency is under a second



---Redshift---
    Data warehouse service in the cloud. Only available in 1 AZ currently.

    Can be configured as such:
        +Single node (160Gb)
        +Multi-node
            >Leader node: manages client connections and receives queries
            >compute node: stores data and performs queries and computations. Can have up to 128 compute nodes.

    Advanced Compression:
        +Columnar data stores are compressed much more than row-based data stores because similar data is stored sequentially on disks
        +automatically selects the most appropriate compression scheme based on samples of your data
        
    Massive Parallel Processing (MPP):
        +automatically distributes data and query load across all the nodes
        +easy to add nodes to data warehouse and maintains fast query performance at scale

    Backups:
        +Enabled by default with a 1 day retention period
        +max retention period is 35 days
        +Redshift always attempts to maintain at least three copies of your data on S3
       


---Aurora---
    AWS proprietary database. Is compatible with MySQL and PostgreSQL.

    Basics:
        +Starts at 10gb and autoscales in 10gb increments up to 64TB
        +compute resources can scale up to 32vCPUs and 244GB of memory
        +2 copies of your data is contained in each availability zone, with minimum of 3 availability zones for a total of 6 copies
        +5 times faster than MySQL and 3 times faster than PostgreSQL

    Scaling Aurora:
        +designed to transparently handle the loss of up to two copies of data without affecting database write availability and up to three copies without affecting read availability
        +storage is self-healing
            >Data block and disks are continuously scanned for errors and repaired automatically



---Elasticache---
    Webservice that makes it easy to deploy, operate, and scale an in-memory cache in the cloud. Improves performance of web applications by allowing you to retrieve information from fast,
    managed, in-memory caches instead of relying entirely on slower disk-based DBs



---Database Migration Service (DMS)---
    Cloud service that makes it easy to migrate relational databases, data warehouses, NoSQL databases, and other types of data stores.
    Can be used to migrate to AWS cloud, between on-premises instances (through AWS Cloud setup), or between combinations of cloud and on-premises setups
    
    DMS is a server in the AWS cloud that runs replication software. You create a source and target connection to tell DMS where to extract from and load to. 
    
     


---Elatic Map Reduce (EMR)---
    Big data platform for processing pedabytes of data using open-source tools such as Apache Spark, Apache Hudi, Apache Hive, and Presto. 
    EMR is made from clusters of EC2 instances. Each node, EC2 instance within a cluster, installs different software components on each node type, giving each node a role
    in a distributed application like Apache Hadoop
    
    Node types:
        +Master node: node that manages the cluster and tracks the status of tasks and health of the cluster. Required.
        +Core node: node with software components that run tasks and stores data in the Hadoop Distributed File System (HDFS) on your cluster. Required.
        +Task node: node with software components that only run tasks and does not store data in HDFS. Optional.

    Within an EMR, the log data is stored in /mnt/var/log/ on the master node. If master node is lost, so is log data.
        +Can configure cluster to periodically archive log data to S3 at 5 min intervals.

    
